System.register([],function(p){"use strict";return{execute:function(){p("atom",U);let T=0;function U(r,i){const g=`atom${++T}`,d={toString:()=>g};return typeof r=="function"?d.read=r:(d.init=r,d.read=m=>m(d),d.write=(m,z,v)=>z(d,typeof v=="function"?v(m(d)):v)),i&&(d.write=i),d}const B=r=>"init"in r,F=r=>!!r.write,S=new WeakMap,V=(r,i)=>{S.set(r,i),r.catch(()=>{}).finally(()=>S.delete(r))},G=(r,i)=>{const g=S.get(r);g&&(S.delete(r),g(i))},H=(r,i)=>{r.status="fulfilled",r.value=i},I=(r,i)=>{r.status="rejected",r.reason=i},M=(r,i)=>"v"in r&&"v"in i&&Object.is(r.v,i.v),K=(r,i)=>"e"in r&&"e"in i&&Object.is(r.e,i.e),j=r=>"v"in r&&r.v instanceof Promise,b=r=>{if("e"in r)throw r.e;return r.v},_=p("createStore",()=>{const r=new WeakMap,i=new WeakMap,g=new Map,d=t=>r.get(t),m=(t,e)=>{const n=r.get(t);if(r.set(t,e),g.has(t)||g.set(t,n),n&&j(n)){const o="v"in e?e.v instanceof Promise?e.v:Promise.resolve(e.v):Promise.reject(e.e);G(n.v,o)}},z=(t,e,n)=>{const o=new Map;let s=!1;n.forEach(c=>{const a=c===t?e:d(c);a&&(o.set(c,a),e.d.get(c)!==a&&(s=!0))}),(s||e.d.size!==o.size)&&(e.d=o)},v=(t,e,n)=>{const o=d(t),s={d:(o==null?void 0:o.d)||new Map,v:e};return n&&z(t,s,n),o&&M(o,s)&&o.d===s.d?o:(m(t,s),s)},$=(t,e,n)=>{const o=d(t),s={d:(o==null?void 0:o.d)||new Map,e};return n&&z(t,s,n),o&&K(o,s)&&o.d===s.d?o:(m(t,s),s)},h=t=>{const e=d(t);if(e&&(e.d.forEach((l,f)=>{f!==t&&!i.has(f)&&h(f)}),Array.from(e.d).every(([l,f])=>l===t||d(l)===f)))return e;const n=new Set;let o=!0;const s=l=>{if(n.add(l),l===t){const u=d(l);if(u)return b(u);if(B(l))return l.init;throw new Error("no atom init")}const f=h(l);return b(f)};let c,a;const P={get signal(){return c||(c=new AbortController),c.signal},get setSelf(){return!a&&F(t)&&(a=(...l)=>{if(!o)return D(t,...l)}),a}};try{const l=t.read(s,P);if(l instanceof Promise){let f;const u=new Promise((y,X)=>{let E=!1;l.then(w=>{E||(E=!0,v(t,u,n),H(u,w),y(w))},w=>{E||(E=!0,v(t,u,n),I(u,w),X(w))}),f=w=>{E||(E=!0,w.then(q=>H(u,q),q=>I(u,q)),y(w))}});return u.status="pending",V(u,y=>{y&&f(y),c==null||c.abort()}),v(t,u,n)}return v(t,l,n)}catch(l){return $(t,l,n)}finally{o=!1}},x=t=>b(h(t)),J=t=>{let e=i.get(t);return e||(e=O(t)),e},A=(t,e)=>!e.l.size&&(!e.t.size||e.t.size===1&&e.t.has(t)),N=t=>{const e=i.get(t);e&&A(t,e)&&W(t)},L=t=>{const e=i.get(t);e==null||e.t.forEach(n=>{if(n!==t){const o=d(n),s=h(n);(!o||!M(o,s))&&L(n)}})},R=(t,...e)=>{let n=!0;const o=a=>b(h(a)),s=(a,...P)=>{let l;if(a===t){if(!B(a))throw new Error("atom not writable");const f=d(a),u=v(a,P[0]);(!f||!M(f,u))&&L(a)}else l=R(a,...P);return n||C(),l},c=t.write(o,s,...e);return n=!1,c},D=(t,...e)=>{const n=R(t,...e);return C(),n},O=(t,e)=>{const n={t:new Set(e&&[e]),l:new Set};if(i.set(t,n),h(t).d.forEach((o,s)=>{const c=i.get(s);c?c.t.add(t):s!==t&&O(s,t)}),h(t),F(t)&&t.onMount){const o=t.onMount((...s)=>D(t,...s));o&&(n.u=o)}return n},W=t=>{var e;const n=(e=i.get(t))==null?void 0:e.u;n&&n(),i.delete(t);const o=d(t);o&&(j(o)&&G(o.v),o.d.forEach((s,c)=>{if(c!==t){const a=i.get(c);a&&(a.t.delete(t),A(c,a)&&W(c))}}))},Q=(t,e,n)=>{const o=new Set(e.d.keys());n==null||n.forEach((s,c)=>{if(o.has(c)){o.delete(c);return}const a=i.get(c);a&&(a.t.delete(t),A(c,a)&&W(c))}),o.forEach(s=>{const c=i.get(s);c?c.t.add(t):i.has(t)&&O(s,t)})},C=()=>{for(;g.size;){const t=Array.from(g);g.clear(),t.forEach(([e,n])=>{const o=d(e);if(o){o.d!==(n==null?void 0:n.d)&&Q(e,o,n==null?void 0:n.d);const s=i.get(e);s&&!(n&&!j(n)&&(M(n,o)||K(n,o)))&&s.l.forEach(c=>c())}})}};return{get:x,set:D,sub:(t,e)=>{const n=J(t);C();const o=n.l;return o.add(e),()=>{o.delete(e),N(t)}}}});let k;const Y=p("getDefaultStore",()=>(k||(k=_()),k))}}});
